<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Zach Palmore">
<meta name="dcterms.date" content="2022-08-28">
<title>Zachary Palmore - Loan Approval</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="../../site_libs/robservable-binding-0.2.2/robservable.js"></script><link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script><link rel="stylesheet" href="../../styles.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Zachary Palmore</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Loan Approval</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
            <p class="subtitle lead">A Credit Risk Assessment for Lenders</p>
                                <div class="quarto-categories">
                <div class="quarto-category">predictive</div>
                <div class="quarto-category">modeling</div>
                <div class="quarto-category">data science</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Zach Palmore </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 28, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#challenge" id="toc-challenge" class="nav-link active" data-scroll-target="#challenge">Challenge</a></li>
  <li><a href="#approach" id="toc-approach" class="nav-link" data-scroll-target="#approach">Approach</a></li>
  <li>
<a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration">Data Exploration</a>
  <ul class="collapse">
<li><a href="#data-characteristics" id="toc-data-characteristics" class="nav-link" data-scroll-target="#data-characteristics">Data Characteristics</a></li>
  <li><a href="#data-summary" id="toc-data-summary" class="nav-link" data-scroll-target="#data-summary">Data summary</a></li>
  <li><a href="#correlations" id="toc-correlations" class="nav-link" data-scroll-target="#correlations">Correlations</a></li>
  </ul>
</li>
  <li>
<a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a>
  <ul class="collapse">
<li><a href="#handling-missing-values" id="toc-handling-missing-values" class="nav-link" data-scroll-target="#handling-missing-values">Handling missing values</a></li>
  <li><a href="#preprocess-using-transformation" id="toc-preprocess-using-transformation" class="nav-link" data-scroll-target="#preprocess-using-transformation">Preprocess using transformation</a></li>
  <li><a href="#training-and-test-partition" id="toc-training-and-test-partition" class="nav-link" data-scroll-target="#training-and-test-partition">Training and Test Partition</a></li>
  </ul>
</li>
  <li>
<a href="#build-models" id="toc-build-models" class="nav-link" data-scroll-target="#build-models">Build Models</a>
  <ul class="collapse">
<li><a href="#linear-discriminant-analysis-lda" id="toc-linear-discriminant-analysis-lda" class="nav-link" data-scroll-target="#linear-discriminant-analysis-lda">Linear Discriminant Analysis (LDA)</a></li>
  <li><a href="#k-nearest-neighbor-knn" id="toc-k-nearest-neighbor-knn" class="nav-link" data-scroll-target="#k-nearest-neighbor-knn">K-nearest neighbor (KNN)</a></li>
  <li><a href="#decision-trees" id="toc-decision-trees" class="nav-link" data-scroll-target="#decision-trees">Decision Trees</a></li>
  <li><a href="#random-forests" id="toc-random-forests" class="nav-link" data-scroll-target="#random-forests">Random Forests</a></li>
  </ul>
</li>
  <li><a href="#model-performance" id="toc-model-performance" class="nav-link" data-scroll-target="#model-performance">Model Performance</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><hr>
<p>The main source of income of lenders stems from their credit line. Can it be improved?</p>
<p>To see the full report and source code, <a href="https://github.com/palmorezm/showcase/tree/master/posts/Loan%20Assessment">visit my Github site</a>.</p>
<section id="challenge" class="level1"><h1>Challenge</h1>
<p>When applying for a loan, banks and lenders use an individual’s credit and other factors to determine the probability of repayment. Here, a predictive model is developed with study data that details how complex factors interact to determine the approval outcome for each individual. This method could be applied to any banks or lenders looking to lower the risk of default and loss in their portfolio to improve their institutional line of credit.</p>
<p>In this challenge we will develop models that allow us to predict whether a loan is approved given certain indicators. Models will include linear discriminant analysis, K-nearest neighbor, decision trees, and random forest algorithms and we will assess which performs best at predicting loan approval status through performance statistics.</p>
</section><section id="approach" class="level1"><h1>Approach</h1>
<p>For this challenge, we begin with data exploration to understand the relationships our target variable ‘Loan_Status’ will have with our indicator variables and the variables’ relationships to each other. This allows us to determine the steps necessary to set up for model development. Once we have an understanding of these variables we use that knowledge to prepare the data. We handle missing values, subset, train and split the data 75/25 so that we may better extract information when modeling. Then, we build the models and predict with the testing dataset.</p>
<p>We focus on prediction accuracy when assessing the models but consider a host of performance statistics and real-world applications to determine which model is best.</p>
<p>We will use ‘r’ for data modeling. All packages used for data exploration, visualization, preparation and modeling are listed in Code Appendix.</p>
</section><section id="data-exploration" class="level1"><h1>Data Exploration</h1>
<section id="data-characteristics" class="level2"><h2 class="anchored" data-anchor-id="data-characteristics">Data Characteristics</h2>
<p>There are 614 observations of 12 variables. Each observation is an applicant’s application for a loan with its corresponding variables of interest. Below is the description of the variables of interest in the data set.</p>
<table class="table">
<thead><tr class="header">
<th>VARIABLE NAME</th>
<th>DESCRIPTION</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Loan_ID</td>
<td>Unique Loan ID</td>
</tr>
<tr class="even">
<td>Gender</td>
<td>Male/ Female</td>
</tr>
<tr class="odd">
<td>Married</td>
<td>Applicant married (Y/N)</td>
</tr>
<tr class="even">
<td>Dependents</td>
<td>Number of dependents</td>
</tr>
<tr class="odd">
<td>Education</td>
<td>Applicant Education (Graduate/ Undergraduate)</td>
</tr>
<tr class="even">
<td>Self_Employed</td>
<td>Self employed (Y/N)</td>
</tr>
<tr class="odd">
<td>ApplicantIncome</td>
<td>Applicant income</td>
</tr>
<tr class="even">
<td>CoapplicantIncome</td>
<td>Coapplicant income</td>
</tr>
<tr class="odd">
<td>LoanAmount</td>
<td>Loan amount in thousands</td>
</tr>
<tr class="even">
<td>Loan_Amount_Term</td>
<td>Term of loan in months</td>
</tr>
<tr class="odd">
<td>Credit_History</td>
<td>credit history meets guidelines</td>
</tr>
<tr class="even">
<td>Property_Area</td>
<td>Urban/ Semi Urban/ Rural</td>
</tr>
<tr class="odd">
<td>Loan_Status</td>
<td>Loan approved (Y/N)</td>
</tr>
</tbody>
</table>
<p>There are four numeric variables represented by loan amount, loan amount term, applicant and co-applicant income. Several of these variables appear to be factors with specific levels but are not coded as such. For example, Gender, Married, Dependents, Education, Self_Employed, Property_Area, Credit_History, and Loan_Status are character strings. We will need to fix this if we are to make use of them.</p>
<div class="cell" data-hash="LendingApproval_cache/html/data_69883904cd8ed48361e825b0fadd67f9">
<details><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># read data, change blank to NA and and remove loan_id</span></span>
<span><span class="va">loan_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">'https://raw.githubusercontent.com/amit-kapoor/Data622Group2/main/Loan_approval.csv'</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">na_if</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># categorical columns as factors</span></span>
<span><span class="va">loan_data</span> <span class="op">&lt;-</span> <span class="va">loan_data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>Gender<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Gender</span><span class="op">)</span>,</span>
<span>         Married<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Married</span><span class="op">)</span>,</span>
<span>         Dependents<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Dependents</span><span class="op">)</span>,</span>
<span>         Education<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Education</span><span class="op">)</span>,</span>
<span>         Self_Employed<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Self_Employed</span><span class="op">)</span>,</span>
<span>         Property_Area<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Property_Area</span><span class="op">)</span>,</span>
<span>         Credit_History<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Credit_History</span><span class="op">)</span>,</span>
<span>         Loan_Status<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Loan_Status</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="data-summary" class="level2"><h2 class="anchored" data-anchor-id="data-summary">Data summary</h2>
<p>Below is a summary of the loan approval dataset. For this process we have already adjusted the data types to their proper forms. This summarizing function quantifies each variable in a manner consistent with their types. We notice the levels of each factor in the ‘Stats/Values’ column, the frequency of valid (non-missing) observations per level of our factors, and the quantity and percent missing alongside them. We review these statistics to identify any issues with each variable.</p>
<div class="cell" data-hash="LendingApproval_cache/html/loan_data_summary_cab2f4f39c7080f1d0df4bc58620a9c1">
<details><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">dfSummary</span><span class="op">(</span><span class="va">loan_data</span>, style <span class="op">=</span> <span class="st">'grid'</span>, graph.col <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["No"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Variable"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Stats / Values"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Freqs (% of Valid)"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Valid"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Missing"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"Gender\\\\\\n[factor]","3":"1\\\\. Female\\\\\\n2\\\\. Male","4":"\\\\112 (18.6%)\\\\\\n\\\\489 (81.4%)","5":"601\\\\\\n(97.9%)","6":"13\\\\\\n(2.1%)","_rn_":"1"},{"1":"2","2":"Married\\\\\\n[factor]","3":"1\\\\. No\\\\\\n2\\\\. Yes","4":"\\\\213 (34.9%)\\\\\\n\\\\398 (65.1%)","5":"611\\\\\\n(99.5%)","6":"3\\\\\\n(0.5%)","_rn_":"2"},{"1":"3","2":"Dependents\\\\\\n[factor]","3":"1\\\\. 0\\\\\\n2\\\\. 1\\\\\\n3\\\\. 2\\\\\\n4\\\\. 3+","4":"\\\\345 (57.6%)\\\\\\n\\\\102 (17.0%)\\\\\\n\\\\101 (16.9%)\\\\\\n\\\\ 51 ( 8.5%)","5":"599\\\\\\n(97.6%)","6":"15\\\\\\n(2.4%)","_rn_":"3"},{"1":"4","2":"Education\\\\\\n[factor]","3":"1\\\\. Graduate\\\\\\n2\\\\. Not Graduate","4":"\\\\480 (78.2%)\\\\\\n\\\\134 (21.8%)","5":"614\\\\\\n(100.0%)","6":"0\\\\\\n(0.0%)","_rn_":"4"},{"1":"5","2":"Self_Employed\\\\\\n[factor]","3":"1\\\\. No\\\\\\n2\\\\. Yes","4":"\\\\500 (85.9%)\\\\\\n\\\\ 82 (14.1%)","5":"582\\\\\\n(94.8%)","6":"32\\\\\\n(5.2%)","_rn_":"5"},{"1":"6","2":"ApplicantIncome\\\\\\n[integer]","3":"Mean (sd) : 5403.5 (6109)\\\\\\nmin < med < max:\\\\\\n150 < 3812.5 < 81000\\\\\\nIQR (CV) : 2917.5 (1.1)","4":"505 distinct values","5":"614\\\\\\n(100.0%)","6":"0\\\\\\n(0.0%)","_rn_":"6"},{"1":"7","2":"CoapplicantIncome\\\\\\n[numeric]","3":"Mean (sd) : 1621.2 (2926.2)\\\\\\nmin < med < max:\\\\\\n0 < 1188.5 < 41667\\\\\\nIQR (CV) : 2297.2 (1.8)","4":"287 distinct values","5":"614\\\\\\n(100.0%)","6":"0\\\\\\n(0.0%)","_rn_":"7"},{"1":"8","2":"LoanAmount\\\\\\n[integer]","3":"Mean (sd) : 146.4 (85.6)\\\\\\nmin < med < max:\\\\\\n9 < 128 < 700\\\\\\nIQR (CV) : 68 (0.6)","4":"203 distinct values","5":"592\\\\\\n(96.4%)","6":"22\\\\\\n(3.6%)","_rn_":"8"},{"1":"9","2":"Loan_Amount_Term\\\\\\n[integer]","3":"Mean (sd) : 342 (65.1)\\\\\\nmin < med < max:\\\\\\n12 < 360 < 480\\\\\\nIQR (CV) : 0 (0.2)","4":"12 :   1 ( 0.2%)\\\\\\n 36 :   2 ( 0.3%)\\\\\\n 60 :   2 ( 0.3%)\\\\\\n 84 :   4 ( 0.7%)\\\\\\n120 :   3 ( 0.5%)\\\\\\n180 :  44 ( 7.3%)\\\\\\n240 :   4 ( 0.7%)\\\\\\n300 :  13 ( 2.2%)\\\\\\n360 : 512 (85.3%)\\\\\\n480 :  15 ( 2.5%)","5":"600\\\\\\n(97.7%)","6":"14\\\\\\n(2.3%)","_rn_":"9"},{"1":"10","2":"Credit_History\\\\\\n[factor]","3":"1\\\\. 0\\\\\\n2\\\\. 1","4":"\\\\ 89 (15.8%)\\\\\\n\\\\475 (84.2%)","5":"564\\\\\\n(91.9%)","6":"50\\\\\\n(8.1%)","_rn_":"10"},{"1":"11","2":"Property_Area\\\\\\n[factor]","3":"1\\\\. Rural\\\\\\n2\\\\. Semiurban\\\\\\n3\\\\. Urban","4":"\\\\179 (29.2%)\\\\\\n\\\\233 (37.9%)\\\\\\n\\\\202 (32.9%)","5":"614\\\\\\n(100.0%)","6":"0\\\\\\n(0.0%)","_rn_":"11"},{"1":"12","2":"Loan_Status\\\\\\n[factor]","3":"1\\\\. N\\\\\\n2\\\\. Y","4":"\\\\192 (31.3%)\\\\\\n\\\\422 (68.7%)","5":"614\\\\\\n(100.0%)","6":"0\\\\\\n(0.0%)","_rn_":"12"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>There are 7 columns that have missing values. The proportion of values for several columns shows significant differences and skew. For example, 97.9% of this dataset contains males applicants based on observations of the Gender variable, 99.5% of applicants are married people given the Married variable, and over 90% of our observations have longer Credit_History. Due to the disproportionate levels within the variables we should expect the data is not representative of a larger population unless that population happens to have similar proportions.</p>
<p>Our numeric incomes variables show significant signs of skew through the differences in their mean and medians as well as their ranges. The lowest applicant income was 150, while the highest was 81000. A similar problem exists with our co-applicant income data having had individuals with 0 income on the lowest end of the range and 41667 on the highest.</p>
<p>However, all of the observations contained an applicant and co-applicant income. Since some applicants may not have used a co-applicant on their applications, part of this skew could be caused by the data collection process. Additionally, we are only missing 3.6% of the observations of loan amount and 2.3% for loan terms.</p>
<p>There are regular intervals and commonality in the loan term amounts which indicates we may have been able to factorize their data types. We chose instead to leave it as a discrete numeric value since it represents the term length which could be any number of days or months. We note that 85.3% percent of these applicants applied for a loan term of 360 but we are unsure if that is due to the lending institutions standard practice or if applicants requested this specific term.</p>
<p>For exploratory purposes, we visualize the proportions to see just how skewed and disproportionate this dataset is. We include missing values to demonstrate their influence on the dataset as well. The chart below shows the distribution of all categorical variables, which includes the factors mentioned previously.</p>
<div class="cell" data-fig.length="20" data-hash="LendingApproval_cache/html/cat-bar_0d69f0a3ecf8457b985e3aea66b1d1ac">
<details><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># select categorical columns</span></span>
<span><span class="va">cat_cols</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">j</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">loan_data</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="op">(</span><span class="va">loan_data</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">==</span> <span class="st">'factor'</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">cat_cols</span><span class="op">[</span><span class="va">j</span><span class="op">]</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">loan_data</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>      <span class="va">j</span> <span class="op">&lt;-</span> <span class="va">j</span><span class="op">+</span><span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">loan_fact</span> <span class="op">&lt;-</span>  <span class="va">loan_data</span><span class="op">[</span><span class="va">cat_cols</span><span class="op">]</span></span>
<span><span class="co"># long format</span></span>
<span><span class="va">loan_factm</span> <span class="op">&lt;-</span> <span class="fu">melt</span><span class="op">(</span><span class="va">loan_fact</span>, measure.vars <span class="op">=</span> <span class="va">cat_cols</span>, variable.name <span class="op">=</span> <span class="st">'metric'</span>, value.name <span class="op">=</span> <span class="st">'value'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot categorical columns</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">loan_factm</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">scale_fill_brewer</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span> <span class="op">~</span> <span class="va">metric</span>, nrow <span class="op">=</span> <span class="fl">5L</span>, scales <span class="op">=</span> <span class="st">'free'</span><span class="op">)</span> <span class="op">+</span> <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="LendingApproval_files/figure-html/cat-bar-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>From this chart, it is very clear we have a dataset with mostly married male graduates with no dependents, a long credit history, and who are not self-employed. There is a relatively even mix of urban, suburban, and rural applicants and a small number of missing values. Applicants tend to be accepted more often than not and there are no missing observations for our target variable ‘Loan_Status’ nor the applicant’s property area or education. These are all of our categorical variables.</p>
<p>We also generate histograms with the count of each observation to assess our numeric variable distributions. This will let us know more about the skewness, average values, and where potential outliers may be found for our numeric variables. The graph below shows their distributions.</p>
<div class="cell" data-hash="LendingApproval_cache/html/plot_num_06f2b27f984e2cd3c114bff22db7f67d">
<details><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">plot_histogram</span><span class="op">(</span><span class="va">loan_data</span>, geom_histogram_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"fill"</span> <span class="op">=</span> <span class="st">"tomato4"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="LendingApproval_files/figure-html/plot_num-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The applicant income and co-applicant income variables are highly right skewed with a smaller number of individual applicants stretching the distribution towards higher incomes. For analysis purposes, we must keep in mind that only a handful of applicants had higher incomes while the bulk of applicants were concentrated at the lower end of the income distribution. The loan amount term has one spike at 360. Meanwhile, the loan amount is the closest to normal. These results are consistent with our summary table.</p>
<p>To review the impact of the categorical variables’ proportions on loan approval in more detail, we isolate the factor levels individually. Here again, we visualize the proportions with and without missing values. Proportions are placed alongside each variable’s frequency table. One example of this process, that of the amount of dependents for the individual, is shown.</p>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-2_760ca1d9ed863ca96de2bca198c9f061">
<details><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">fact_freq_table</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">key</span>, <span class="st">"value"</span>, <span class="st">"freq"</span>, <span class="va">percent</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">rename</span><span class="op">(</span>name <span class="op">=</span> <span class="va">value</span>, value <span class="op">=</span> <span class="va">freq</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">key</span> <span class="op">==</span> <span class="st">"Dependents"</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span>inputId <span class="op">=</span> <span class="st">"type"</span>, </span>
<span>            label <span class="op">=</span> <span class="fu">strong</span><span class="op">(</span><span class="st">"Factor Selection"</span><span class="op">)</span>,</span>
<span>            choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">key</span><span class="op">)</span>,</span>
<span>            selected <span class="op">=</span> <span class="st">"Dependents"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display no-overflow-x">
<div class="form-group shiny-input-container">
<label class="control-label" id="type-label" for="type">
<strong>Factor Selection</strong>
</label>
<div>
<select id="type"><option value="Dependents" selected="">Dependents</option></select><script type="application/json" data-for="type" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">robservable</span><span class="op">(</span></span>
<span>  <span class="st">"https://observablehq.com/@juba/draggable-pie-donut-chart"</span>,</span>
<span>  include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"chart"</span>, <span class="st">"draw"</span><span class="op">)</span>,</span>
<span>  hide <span class="op">=</span> <span class="st">"draw"</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span><span class="op">)</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">700</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div id="htmlwidget-3c9bba3053bfb5a82798" style="width:100%;height:445px;" class="robservable html-widget"></div>
<script type="application/json" data-for="htmlwidget-3c9bba3053bfb5a82798">{"x":{"notebook":"https://observablehq.com/@juba/draggable-pie-donut-chart","include":["chart","draw"],"hide":"draw","input":{"data":[{"key":"Dependents","name":"0","value":345,"percent":56.19},{"key":"Dependents","name":"1","value":102,"percent":16.61},{"key":"Dependents","name":"2","value":101,"percent":16.45},{"key":"Dependents","name":"3+","value":51,"percent":8.31},{"key":"Dependents","name":"Missing","value":15,"percent":2.44}]},"input_js":[],"observers":null,"update_height":true,"update_width":true},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-3_a898a9ee096bd38fdefac117c148ab6e">
<details><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">loan_dep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">loan_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">Dependents</span>, <span class="va">Loan_Status</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Loan_Status</span> <span class="op">==</span> <span class="st">'Y'</span><span class="op">)</span></span>
<span><span class="va">loan_dep</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Dependents"],"name":[1],"type":["fct"],"align":["left"]},{"label":["Loan_Status"],"name":[2],"type":["fct"],"align":["left"]},{"label":["Freq"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"0","2":"Y","3":"0.6898551"},{"1":"1","2":"Y","3":"0.6470588"},{"1":"2","2":"Y","3":"0.7524752"},{"1":"3+","2":"Y","3":"0.6470588"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Although we only show one example, the remaining examples confirm our thoughts about the dataset’s disproportionalities. Missing values have little effect on the overall proportions and so they can simply be removed or omitted. It remains male dominated with applicants who are married, have no dependents, are highly educated, and have a long credit history.</p>
</section><section id="correlations" class="level2"><h2 class="anchored" data-anchor-id="correlations">Correlations</h2>
<p>To determine how well each variable is correlated with our target variable and with one another, we construct a correlation plot. This plot contains the values of all correlation between variables represented by colors and numbers. The row we review the most is our target variable, ‘Loan_Status.’</p>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-5_a9fd1528b983af0af9e4fa041f7642df">
<details><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">G</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">loan_data</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">loan_data</span><span class="op">)</span><span class="op">-</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu">corrplot</span><span class="op">(</span><span class="va">G</span>, method <span class="op">=</span> <span class="st">'number'</span><span class="op">)</span> <span class="co"># colorful number</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="LendingApproval_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The numeric features do not seem to be strongly correlated with another so that is a factor that does not have to be dealt with.</p>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-6_203efded4a53068f679a090b47d85e79">
<details><summary>Code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">G</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">loan_data</span><span class="op">[</span><span class="fl">6</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">loan_data</span><span class="op">)</span><span class="op">-</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu">corrplot</span><span class="op">(</span><span class="va">G</span>, method <span class="op">=</span> <span class="st">'number'</span><span class="op">)</span> <span class="co"># colorful number</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="LendingApproval_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Given that our numeric features have correlation values near 0, they do not seem to be strongly correlated with our target. They also do not seem to have any correlation with one another so this is a factor that does not have to be dealt with.</p>
</section></section><section id="data-preparation" class="level1"><h1>Data Preparation</h1>
<section id="handling-missing-values" class="level2"><h2 class="anchored" data-anchor-id="handling-missing-values">Handling missing values</h2>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-7_4a2b95bfa4ad64c20b6df13b89a30464">
<details><summary>Code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># plot missing values</span></span>
<span><span class="fu">plot_missing</span><span class="op">(</span><span class="va">loan_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="LendingApproval_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see above credit_history contributes to 8% of missing data along with self_employed that accounts for more than 5% of missing data. All records having missing categorical predictors will be removed. Next we will impute numeric values using MICE (Multivariate Imputation by Chained Equations).</p>
<div class="cell" data-hash="LendingApproval_cache/html/cat-missing_27a8a89f7e9b1712be4801ac96d29b4c">
<details><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Filter out the data which has missing categorical predictors</span></span>
<span><span class="va">loan_data</span> <span class="op">&lt;-</span> <span class="va">loan_data</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Credit_History</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>                                  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Self_Employed</span><span class="op">)</span> <span class="op">&amp;</span>  </span>
<span>                                  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Dependents</span><span class="op">)</span> <span class="op">&amp;</span> </span>
<span>                                  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Gender</span><span class="op">)</span> <span class="op">&amp;</span> </span>
<span>                                  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">Married</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="LendingApproval_cache/html/num-missing_3ef76fbe6c0b7a96ec3243937cdd4c82">
<details><summary>Code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># impute numeric predictors using mice</span></span>
<span><span class="va">loan_data</span> <span class="op">&lt;-</span> <span class="fu">complete</span><span class="op">(</span><span class="fu">mice</span><span class="op">(</span>data<span class="op">=</span><span class="va">loan_data</span>, method<span class="op">=</span><span class="st">"pmm"</span>, print<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-8_a7b411702f31fba1216632f9a43c71da">
<details><summary>Code</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">loan_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 511  12</code></pre>
</div>
</div>
<p>Finally our clean dataset contains 511 rows and 12 columns.</p>
</section><section id="preprocess-using-transformation" class="level2"><h2 class="anchored" data-anchor-id="preprocess-using-transformation">Preprocess using transformation</h2>
<p>We have seen above that numeric features are right skewed so in this step we will use caret <code>preprocess</code> method using box cox, center and scale transformation.</p>
<div class="cell" data-hash="LendingApproval_cache/html/transform-train_31610bad4abae669f49e86971bbb5770">
<details><summary>Code</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># library(e1071) - where this was used</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">622</span><span class="op">)</span></span>
<span><span class="va">loan_data</span> <span class="op">&lt;-</span> <span class="va">loan_data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ApplicantIncome"</span>, <span class="st">"CoapplicantIncome"</span>, <span class="st">"LoanAmount"</span>, <span class="st">"Loan_Amount_Term"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">preProcess</span><span class="op">(</span>method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BoxCox"</span>,<span class="st">"center"</span>,<span class="st">"scale"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">loan_data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="training-and-test-partition" class="level2"><h2 class="anchored" data-anchor-id="training-and-test-partition">Training and Test Partition</h2>
<p>In this step for data preparation we will partition the training dataset in training and validation sets using <code>createDataPartition</code> method from <code>caret</code> package. We will reserve 75% for training and rest 25% for validation purpose.</p>
<div class="cell" data-hash="LendingApproval_cache/html/partition_b242e45dc82e4a7d2b9dd8e7d8596148">
<details><summary>Code</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">622</span><span class="op">)</span></span>
<span><span class="va">partition</span> <span class="op">&lt;-</span> <span class="fu">createDataPartition</span><span class="op">(</span><span class="va">loan_data</span><span class="op">$</span><span class="va">Loan_Status</span>, p<span class="op">=</span><span class="fl">0.75</span>, list <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">training</span> <span class="op">&lt;-</span> <span class="va">loan_data</span><span class="op">[</span><span class="va">partition</span>,<span class="op">]</span></span>
<span><span class="va">testing</span> <span class="op">&lt;-</span> <span class="va">loan_data</span><span class="op">[</span><span class="op">-</span><span class="va">partition</span>,<span class="op">]</span></span>
<span></span>
<span><span class="co"># training/validation partition for independent variables</span></span>
<span><span class="co">#X.train &lt;- ld.clean[partition, ] %&gt;% dplyr::select(-Loan_Status)</span></span>
<span><span class="co">#X.test &lt;- ld.clean[-partition, ] %&gt;% dplyr::select(-Loan_Status)</span></span>
<span></span>
<span><span class="co"># training/validation partition for dependent variable Loan_Status</span></span>
<span><span class="co">#y.train &lt;- ld.clean$Loan_Status[partition]</span></span>
<span><span class="co">#y.test &lt;- ld.clean$Loan_Status[-partition]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="build-models" class="level1"><h1>Build Models</h1>
<section id="linear-discriminant-analysis-lda" class="level2"><h2 class="anchored" data-anchor-id="linear-discriminant-analysis-lda">Linear Discriminant Analysis (LDA)</h2>
<div class="cell" data-hash="LendingApproval_cache/html/lda_2b9bebed209ebba21ad95fe843727f61">
<details><summary>Code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># LDA model</span></span>
<span><span class="va">lda_model</span> <span class="op">&lt;-</span> <span class="fu">lda</span><span class="op">(</span><span class="va">Loan_Status</span><span class="op">~</span><span class="va">.</span>, data <span class="op">=</span> <span class="va">loan_data</span><span class="op">)</span></span>
<span><span class="va">lda_model</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Call:
lda(Loan_Status ~ ., data = loan_data)

Prior probabilities of groups:
        N         Y 
0.3209393 0.6790607 

Group means:
  GenderMale MarriedYes Dependents1 Dependents2 Dependents3+
N  0.7926829  0.5792683   0.1829268   0.1341463   0.09756098
Y  0.8357349  0.6801153   0.1585014   0.1902017   0.08069164
  EducationNot Graduate Self_EmployedYes ApplicantIncome CoapplicantIncome
N             0.2682927        0.1463415     0.003576320         0.0571435
Y             0.1902017        0.1325648    -0.001690249        -0.0270073
   LoanAmount Loan_Amount_Term Credit_History1 Property_AreaSemiurban
N  0.07966414      0.016992352       0.5548780              0.2682927
Y -0.03765106     -0.008030968       0.9798271              0.4409222
  Property_AreaUrban
N          0.3719512
Y          0.2997118

Coefficients of linear discriminants:
                                LD1
GenderMale              0.185159211
MarriedYes              0.375755462
Dependents1            -0.209004726
Dependents2             0.137509542
Dependents3+            0.007142953
EducationNot Graduate  -0.294391997
Self_EmployedYes       -0.025905262
ApplicantIncome        -0.012085555
CoapplicantIncome      -0.106529320
LoanAmount             -0.099136040
Loan_Amount_Term       -0.049820158
Credit_History1         3.073804026
Property_AreaSemiurban  0.616732100
Property_AreaUrban      0.066231320</code></pre>
</div>
</div>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-9_d7e2ea96b017deee1105e05c1561cf38">
<details><summary>Code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># prediction from lda model</span></span>
<span><span class="va">lda_predict</span> <span class="op">&lt;-</span> <span class="va">lda_model</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">testing</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-hash="LendingApproval_cache/html/lda-accuracy_d4c409d1b25fc91bc364168c1c12d18f">
<details><summary>Code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># accuracy</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">lda_predict</span><span class="op">$</span><span class="va">class</span><span class="op">==</span><span class="va">testing</span><span class="op">$</span><span class="va">Loan_Status</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8110236</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">confusionMatrix</span><span class="op">(</span><span class="va">lda_predict</span><span class="op">$</span><span class="va">class</span>, <span class="va">testing</span><span class="op">$</span><span class="va">Loan_Status</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction  N  Y
         N 19  2
         Y 22 84
                                        
               Accuracy : 0.811         
                 95% CI : (0.732, 0.875)
    No Information Rate : 0.6772        
    P-Value [Acc &gt; NIR] : 0.0005479     
                                        
                  Kappa : 0.5046        
                                        
 Mcnemar's Test P-Value : 0.0001052     
                                        
            Sensitivity : 0.4634        
            Specificity : 0.9767        
         Pos Pred Value : 0.9048        
         Neg Pred Value : 0.7925        
             Prevalence : 0.3228        
         Detection Rate : 0.1496        
   Detection Prevalence : 0.1654        
      Balanced Accuracy : 0.7201        
                                        
       'Positive' Class : N             
                                        </code></pre>
</div>
</div>
<p>LDA model accuracy comes out as ~81%</p>
</section><section id="k-nearest-neighbor-knn" class="level2"><h2 class="anchored" data-anchor-id="k-nearest-neighbor-knn">K-nearest neighbor (KNN)</h2>
<div class="cell" data-hash="LendingApproval_cache/html/knn_4b987550e997a1e53c07e5233b4262e0">
<details><summary>Code</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># KNN model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">622</span><span class="op">)</span></span>
<span><span class="va">train.knn</span> <span class="op">&lt;-</span> <span class="va">training</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">training</span><span class="op">)</span> <span class="op">!=</span> <span class="st">"Direction"</span><span class="op">]</span></span>
<span><span class="va">prep</span> <span class="op">&lt;-</span> <span class="fu">preProcess</span><span class="op">(</span>x <span class="op">=</span> <span class="va">train.knn</span>, method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">prep</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Created from 384 samples and 12 variables

Pre-processing:
  - centered (4)
  - ignored (8)
  - scaled (4)</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu">trainControl</span><span class="op">(</span>method<span class="op">=</span><span class="st">"repeatedcv"</span>, repeats <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> </span>
<span><span class="va">knn_model</span> <span class="op">&lt;-</span> <span class="fu">train</span><span class="op">(</span><span class="va">Loan_Status</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">training</span>, </span>
<span>                method <span class="op">=</span> <span class="st">"knn"</span>, </span>
<span>                trControl <span class="op">=</span> <span class="va">cl</span>, </span>
<span>                preProcess <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"center"</span>,<span class="st">"scale"</span><span class="op">)</span>, </span>
<span>                tuneLength <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="va">knn_model</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>k-Nearest Neighbors 

384 samples
 11 predictor
  2 classes: 'N', 'Y' 

Pre-processing: centered (14), scaled (14) 
Resampling: Cross-Validated (10 fold, repeated 5 times) 
Summary of sample sizes: 346, 346, 346, 345, 346, 345, ... 
Resampling results across tuning parameters:

  k   Accuracy   Kappa    
   5  0.7590209  0.3575145
   7  0.7689406  0.3751117
   9  0.7725985  0.3746036
  11  0.7782524  0.3884713
  13  0.7829615  0.3994494
  15  0.7787908  0.3849571
  17  0.7689528  0.3503238
  19  0.7642294  0.3309567
  21  0.7647551  0.3299468
  23  0.7548097  0.2947001
  25  0.7454298  0.2607665
  27  0.7412733  0.2448000
  29  0.7402746  0.2423939
  31  0.7365911  0.2319391
  33  0.7292901  0.2050164
  35  0.7251066  0.1885755
  37  0.7178596  0.1615955
  39  0.7126768  0.1383143
  41  0.7100317  0.1282468
  43  0.7084798  0.1212857

Accuracy was used to select the optimal model using the largest value.
The final value used for the model was k = 13.</code></pre>
</div>
</div>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-10_ac6e04716814366746f17aeb06499f98">
<details><summary>Code</summary><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># prediction from knn model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">knn_model</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="LendingApproval_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">knn_predict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">knn_model</span>,newdata <span class="op">=</span> <span class="va">testing</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">knn_predict</span> <span class="op">==</span> <span class="va">testing</span><span class="op">$</span><span class="va">Loan_Status</span><span class="op">)</span> <span class="co"># accuracy</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7952756</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">confusionMatrix</span><span class="op">(</span><span class="va">knn_predict</span>, <span class="va">testing</span><span class="op">$</span><span class="va">Loan_Status</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction  N  Y
         N 17  2
         Y 24 84
                                          
               Accuracy : 0.7953          
                 95% CI : (0.7146, 0.8617)
    No Information Rate : 0.6772          
    P-Value [Acc &gt; NIR] : 0.002202        
                                          
                  Kappa : 0.4553          
                                          
 Mcnemar's Test P-Value : 3.814e-05       
                                          
            Sensitivity : 0.4146          
            Specificity : 0.9767          
         Pos Pred Value : 0.8947          
         Neg Pred Value : 0.7778          
             Prevalence : 0.3228          
         Detection Rate : 0.1339          
   Detection Prevalence : 0.1496          
      Balanced Accuracy : 0.6957          
                                          
       'Positive' Class : N               
                                          </code></pre>
</div>
</div>
<p>KNN model accuracy comes out as ~80%</p>
</section><section id="decision-trees" class="level2"><h2 class="anchored" data-anchor-id="decision-trees">Decision Trees</h2>
<div class="cell" data-hash="LendingApproval_cache/html/Decision_a181bbef43c89a2a66a3c91261545067">
<details><summary>Code</summary><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Decision Trees model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">622</span><span class="op">)</span></span>
<span><span class="va">tree.loans</span> <span class="op">=</span> <span class="fu">tree</span><span class="op">(</span><span class="va">Loan_Status</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">training</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">tree.loans</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Classification tree:
tree(formula = Loan_Status ~ ., data = training)
Variables actually used in tree construction:
[1] "Credit_History"    "Property_Area"     "CoapplicantIncome"
Number of terminal nodes:  5 
Residual mean deviance:  0.921 = 349 / 379 
Misclassification error rate: 0.1849 = 71 / 384 </code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">tree.loans</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/text.html">text</a></span><span class="op">(</span><span class="va">tree.loans</span>, pretty <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="LendingApproval_files/figure-html/Decision-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-11_a4181eada9d0411f9f3a1ad4ac759a7a">
<details><summary>Code</summary><div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># prediction from decision tree model</span></span>
<span><span class="va">tree.predict</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">tree.loans</span>, <span class="va">testing</span>, type <span class="op">=</span> <span class="st">'class'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">tree.predict</span> <span class="op">==</span> <span class="va">testing</span><span class="op">$</span><span class="va">Loan_Status</span><span class="op">)</span> <span class="co"># accuracy</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7952756</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">confusionMatrix</span><span class="op">(</span><span class="va">tree.predict</span>, <span class="va">testing</span><span class="op">$</span><span class="va">Loan_Status</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction  N  Y
         N 19  4
         Y 22 82
                                          
               Accuracy : 0.7953          
                 95% CI : (0.7146, 0.8617)
    No Information Rate : 0.6772          
    P-Value [Acc &gt; NIR] : 0.0022025       
                                          
                  Kappa : 0.471           
                                          
 Mcnemar's Test P-Value : 0.0008561       
                                          
            Sensitivity : 0.4634          
            Specificity : 0.9535          
         Pos Pred Value : 0.8261          
         Neg Pred Value : 0.7885          
             Prevalence : 0.3228          
         Detection Rate : 0.1496          
   Detection Prevalence : 0.1811          
      Balanced Accuracy : 0.7085          
                                          
       'Positive' Class : N               
                                          </code></pre>
</div>
</div>
<p>Decision Tree model accuracy comes out as ~80%</p>
</section><section id="random-forests" class="level2"><h2 class="anchored" data-anchor-id="random-forests">Random Forests</h2>
<div class="cell" data-hash="LendingApproval_cache/html/rf_56c35b92442e288f792eda4fe342704f">
<details><summary>Code</summary><div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">622</span><span class="op">)</span></span>
<span><span class="co"># Random Forest model</span></span>
<span><span class="va">rf.loans</span> <span class="op">&lt;-</span> <span class="fu">randomForest</span><span class="op">(</span><span class="va">Loan_Status</span><span class="op">~</span><span class="va">.</span>, data <span class="op">=</span> <span class="va">training</span><span class="op">)</span></span>
<span><span class="va">rf.loans</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
 randomForest(formula = Loan_Status ~ ., data = training) 
               Type of random forest: classification
                     Number of trees: 500
No. of variables tried at each split: 3

        OOB estimate of  error rate: 20.57%
Confusion matrix:
   N   Y class.error
N 59  64  0.52032520
Y 15 246  0.05747126</code></pre>
</div>
</div>
<div class="cell" data-hash="LendingApproval_cache/html/unnamed-chunk-12_8365b178b26cfe229f7c7fccd3a32e31">
<details><summary>Code</summary><div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># prediction from random forest model</span></span>
<span><span class="va">rf.predict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">rf.loans</span>, <span class="va">testing</span>,type<span class="op">=</span><span class="st">'class'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">rf.predict</span> <span class="op">==</span> <span class="va">testing</span><span class="op">$</span><span class="va">Loan_Status</span><span class="op">)</span> <span class="co"># accuracy</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8110236</code></pre>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">confusionMatrix</span><span class="op">(</span><span class="va">rf.predict</span>, <span class="va">testing</span><span class="op">$</span><span class="va">Loan_Status</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction  N  Y
         N 22  5
         Y 19 81
                                        
               Accuracy : 0.811         
                 95% CI : (0.732, 0.875)
    No Information Rate : 0.6772        
    P-Value [Acc &gt; NIR] : 0.0005479     
                                        
                  Kappa : 0.5254        
                                        
 Mcnemar's Test P-Value : 0.0079635     
                                        
            Sensitivity : 0.5366        
            Specificity : 0.9419        
         Pos Pred Value : 0.8148        
         Neg Pred Value : 0.8100        
             Prevalence : 0.3228        
         Detection Rate : 0.1732        
   Detection Prevalence : 0.2126        
      Balanced Accuracy : 0.7392        
                                        
       'Positive' Class : N             
                                        </code></pre>
</div>
</div>
<p>Random Forest model accuracy comes out as ~80%</p>
</section></section><section id="model-performance" class="level1"><h1>Model Performance</h1>
<p>All 4 of the models we built above have an accuracy rate of around 80% with the Random Forest and LDA model getting the light edge in accuracy (81.1% to 79.5%)</p>
<p>We will look at some more detailed accuracy metrics produced from the predict function.</p>
<div class="cell" data-hash="LendingApproval_cache/html/model-performance_a26406f0e03c1085b1ce4be91262a4f5">
<details><summary>Model Performance</summary><div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">model_performance_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>         <span class="st">"Linear Discriminant Analysis (LDA)"</span>, </span>
<span>         <span class="fl">0.732</span>, <span class="fl">0.875</span>, <span class="op">(</span><span class="fl">0.875</span><span class="op">-</span><span class="fl">0.732</span><span class="op">)</span>, </span>
<span>         <span class="fl">0.811</span>, <span class="fl">0.720</span>, <span class="fl">0.463</span>, <span class="fl">0.977</span>,</span>
<span>         <span class="fl">0.505</span>, <span class="fl">0.905</span>, <span class="fl">0.001</span>,</span>
<span>         <span class="st">"K-Nearest Neighbor (KNN)"</span>, </span>
<span>         <span class="fl">0.715</span>, <span class="fl">0.862</span>, <span class="op">(</span><span class="fl">0.862</span><span class="op">-</span><span class="fl">0.715</span><span class="op">)</span>,</span>
<span>         <span class="fl">0.795</span>, <span class="fl">0.696</span>, <span class="fl">0.415</span>, <span class="fl">0.977</span>,</span>
<span>         <span class="fl">0.455</span>, <span class="fl">0.895</span>, <span class="fl">0.002</span>,</span>
<span>         <span class="st">"Decision Trees (DTs)"</span>, </span>
<span>         <span class="fl">0.715</span>, <span class="fl">0.862</span>, <span class="op">(</span><span class="fl">0.862</span><span class="op">-</span><span class="fl">0.715</span><span class="op">)</span>,</span>
<span>         <span class="fl">0.795</span>, <span class="fl">0.709</span>, <span class="fl">0.463</span>, <span class="fl">0.954</span>,</span>
<span>         <span class="fl">0.471</span>, <span class="fl">0.826</span>, <span class="fl">0.001</span>, </span>
<span>         <span class="st">"Random Forests (RFs)"</span>, </span>
<span>         <span class="fl">0.732</span>, <span class="fl">0.875</span>, <span class="op">(</span><span class="fl">0.875</span><span class="op">-</span><span class="fl">0.732</span><span class="op">)</span>,</span>
<span>         <span class="fl">0.811</span>, <span class="fl">0.739</span>, <span class="fl">0.537</span>, <span class="fl">0.942</span>,</span>
<span>         <span class="fl">0.525</span>, <span class="fl">0.815</span>, <span class="fl">0.001</span><span class="op">)</span>,</span>
<span>         nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">model_performance_table</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ID"</span>, </span>
<span>                               <span class="st">"Lower"</span>, </span>
<span>                               <span class="st">"Upper"</span>, </span>
<span>                               <span class="st">"Range &amp; Variation"</span>,</span>
<span>                               <span class="st">"Accuracy"</span>,</span>
<span>                              <span class="st">"Sensitivity"</span>, </span>
<span>                              <span class="st">"Specificity"</span>,</span>
<span>                              <span class="st">"Balanced Accuracy"</span>,</span>
<span>                              <span class="st">"Kappa"</span>, </span>
<span>                              <span class="st">"True Positives"</span>, </span>
<span>                              <span class="st">"P-value"</span><span class="op">)</span></span>
<span><span class="va">model_performance_table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Lower"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Upper"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Range & Variation"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Accuracy"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Sensitivity"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Specificity"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Balanced Accuracy"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Kappa"],"name":[9],"type":["chr"],"align":["left"]},{"label":["True Positives"],"name":[10],"type":["chr"],"align":["left"]},{"label":["P-value"],"name":[11],"type":["chr"],"align":["left"]}],"data":[{"1":"Linear Discriminant Analysis (LDA)","2":"0.732","3":"0.875","4":"0.143","5":"0.811","6":"0.72","7":"0.463","8":"0.977","9":"0.505","10":"0.905","11":"0.001"},{"1":"K-Nearest Neighbor (KNN)","2":"0.715","3":"0.862","4":"0.147","5":"0.795","6":"0.696","7":"0.415","8":"0.977","9":"0.455","10":"0.895","11":"0.002"},{"1":"Decision Trees (DTs)","2":"0.715","3":"0.862","4":"0.147","5":"0.795","6":"0.709","7":"0.463","8":"0.954","9":"0.471","10":"0.826","11":"0.001"},{"1":"Random Forests (RFs)","2":"0.732","3":"0.875","4":"0.143","5":"0.811","6":"0.739","7":"0.537","8":"0.942","9":"0.525","10":"0.815","11":"0.001"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>In this particular case, since the accuracy results are so similar it is wise to examine which models are most often leading to type 1 or type 2 errors. Assuming a null hypothesis is not giving a loan, a type 1 error is giving someone a loan when they should not have gotten one and a type 2 error is not giving someone a loan when they should have gotten one. This correlates to the sensitivity and specificity respectively.</p>
<p>The balanced accuracy metric takes the mean of sensitivity and specificity in order to diagnose if a model appears to be accurate but is really only predicting the positive or negative case correctly. In this case the random forest model has a slight edge over the LDA in balanced accuracy (0.739 to 0.7201). This metric should be considered most impactful in our decision-making process since it directly contributes to the type of risk that will have to be managed in a portfolio.</p>
<p>Although the LDA has the smallest p-value it is still &lt;0.0025 for all models. They can all be used so this does not help us decide which model to choose. The same can be said for the Mcnemar’s p-value.</p>
<p>The random forest also has the best Kappa score of 0.525. The Kappa score can be a much more accurate indicator of accuracy then the standard accuracy rate. The kappa score takes into account the expected accuracy of a model given the instances of each class. This helps a lot with unbalanced class numbers in the dataset. It is encouraging to see that our random forest model’s Kappa is also the highest because this corresponds with it having the highest expected accuracy of our models in production.</p>
<p>Given that our random forest and LDA models have nearly equal accuracy, the same low-amount of variations present in their predictions, and reasonable kappa scores, either could be used with similar results. However, it is also important to consider context. The priority for business is to ensure loans are paid and lower the risk of loss or credit damage. For this reason, it may be beneficial to focus on the type 1 error rate, if we do not care how many people do not get loans when they should have. Otherwise, the more holistic metric of balanced accuracy ensures that more people get approved for loans when needed.</p>
<p>It is also important to consider our data assets. The LDA model requires fewer inputs to produce an output with nearly identical accuracy as the random forest model. If we were in a highly competitive market for data assets then a reduction in input for equally accurate predictive results could be more important than any performance score. Therefore, in resource competitive environments, the LDA would be the preferred model method since it can produce the highest balanced accuracy.</p>
</section><section id="conclusion" class="level1"><h1>Conclusion</h1>
<p>After reviewing the results of 4 different models (LDA, KNN, Decision Tree, and Random Forest), we found that LDA is the most accurate by balanced accuracy and should be considered the best model in competitive resource limited environments. However, the performance metrics for these 4 models were very close. Depending on the stakeholders, it may be wise to recommend the random forest model with the caveat that greater resources would need to be devoted to it to produce slightly higher sensitivity scores.</p>
<p>When attempting to minimize risk as much as possible and avoid purchasing data assets, the LDA model provides the best insights. If the lender is willing to provide more loans at a greater level of risk, then, based on this data set, the random forest would be better suited for this task.</p>
<p>To improve upon these metrics and gain better predictive power we should consider feature engineering and exploring new model types. Some models may be able to produce the same results with fewer features and if data collection resources are of concern, such a model would be essential to avoid paying for new features or data sets. There may also be undiscovered relationships between variables that can be used to better estimate likelihood of repayment and provide new insights.</p>
<p>To see the full report and source code, <a href="https://github.com/palmorezm/showcase/tree/master/posts/Loan%20Assessment">visit my Github site</a>.</p>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb48" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Loan Approval"</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "A Credit Risk Assessment for Lenders"</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Zach Palmore"</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2022-08-28"</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [predictive, modeling, data science]</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> "transparent_moneytree.png"</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-link: true</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="co">    highlight-style: pygments</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="co">    html-math-method: katex</span></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: paged</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="co">    cache: true</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="co">    theme:</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a><span class="co">      light: flatly</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="co">      dark: darkly</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo=</span><span class="cn">FALSE</span>, <span class="at">error=</span><span class="cn">FALSE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>, <span class="at">fig.align=</span><span class="st">"center"</span>, <span class="at">fig.width =</span> <span class="dv">10</span>)</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>The main source of income of lenders stems from their credit line. Can it be improved?</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>To see the full report and source code, <span class="co">[</span><span class="ot">visit my Github site</span><span class="co">](https://github.com/palmorezm/showcase/tree/master/posts/Loan%20Assessment)</span>.</span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a><span class="fu"># Challenge</span></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>When applying for a loan, banks and lenders use an individual's credit and other factors to determine the probability of repayment. Here, a predictive model is developed with study data that details how complex factors interact to determine the approval outcome for each individual. This method could be applied to any banks or lenders looking to lower the risk of default and loss in their portfolio to improve their institutional line of credit.</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>In this challenge we will develop models that allow us to predict whether a loan is approved given certain indicators. Models will include linear discriminant analysis, K-nearest neighbor, decision trees, and random forest algorithms and we will assess which performs best at predicting loan approval status through performance statistics.</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a><span class="fu"># Approach</span></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>For this challenge, we begin with data exploration to understand the relationships our target variable 'Loan_Status' will have with our indicator variables and the variables' relationships to each other. This allows us to determine the steps necessary to set up for model development. Once we have an understanding of these variables we use that knowledge to prepare the data. We handle missing values, subset, train and split the data 75/25 so that we may better extract information when modeling. Then, we build the models and predict with the testing dataset.</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a>We focus on prediction accuracy when assessing the models but consider a host of performance statistics and real-world applications to determine which model is best. We use a mix of python and R for data modeling with Shiny and JavaScript for visualizations. All packages used for data exploration, visualization, preparation and modeling are listed. </span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a><span class="in">```{r libraries, include=FALSE, warning=FALSE, message=FALSE}</span></span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmlwidgets)</span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(robservable)</span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(summarytools)</span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DataExplorer)</span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mice)</span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb48-55"><a href="#cb48-55" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(e1071)</span>
<span id="cb48-56"><a href="#cb48-56" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb48-57"><a href="#cb48-57" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tree)</span>
<span id="cb48-58"><a href="#cb48-58" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span>
<span id="cb48-59"><a href="#cb48-59" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb48-60"><a href="#cb48-60" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb48-61"><a href="#cb48-61" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinyjs)</span>
<span id="cb48-62"><a href="#cb48-62" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb48-63"><a href="#cb48-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-64"><a href="#cb48-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-65"><a href="#cb48-65" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Exploration</span></span>
<span id="cb48-66"><a href="#cb48-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-67"><a href="#cb48-67" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Characteristics</span></span>
<span id="cb48-68"><a href="#cb48-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-69"><a href="#cb48-69" aria-hidden="true" tabindex="-1"></a>Normally, there are many thousands of records or observations with descriptive variables of each. Here, we use a small, subset for example purposes. Each observation represents an applicant's application for a loan with its corresponding variables of interest. Below is the description of the variables of interest in the data set.</span>
<span id="cb48-70"><a href="#cb48-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-71"><a href="#cb48-71" aria-hidden="true" tabindex="-1"></a>| VARIABLE NAME     | DESCRIPTION                                   |</span>
<span id="cb48-72"><a href="#cb48-72" aria-hidden="true" tabindex="-1"></a>|-------------------|-----------------------------------------------|</span>
<span id="cb48-73"><a href="#cb48-73" aria-hidden="true" tabindex="-1"></a>| Loan_ID           | Unique Loan ID                                |</span>
<span id="cb48-74"><a href="#cb48-74" aria-hidden="true" tabindex="-1"></a>| Gender            | Male/ Female                                  |</span>
<span id="cb48-75"><a href="#cb48-75" aria-hidden="true" tabindex="-1"></a>| Married           | Applicant married (Y/N)                       |</span>
<span id="cb48-76"><a href="#cb48-76" aria-hidden="true" tabindex="-1"></a>| Dependents        | Number of dependents                          |</span>
<span id="cb48-77"><a href="#cb48-77" aria-hidden="true" tabindex="-1"></a>| Education         | Applicant Education (Graduate/ Undergraduate) |</span>
<span id="cb48-78"><a href="#cb48-78" aria-hidden="true" tabindex="-1"></a>| Self_Employed     | Self employed (Y/N)                           |</span>
<span id="cb48-79"><a href="#cb48-79" aria-hidden="true" tabindex="-1"></a>| ApplicantIncome   | Applicant income                              |</span>
<span id="cb48-80"><a href="#cb48-80" aria-hidden="true" tabindex="-1"></a>| CoapplicantIncome | Coapplicant income                            |</span>
<span id="cb48-81"><a href="#cb48-81" aria-hidden="true" tabindex="-1"></a>| LoanAmount        | Loan amount in thousands                      |</span>
<span id="cb48-82"><a href="#cb48-82" aria-hidden="true" tabindex="-1"></a>| Loan_Amount_Term  | Term of loan in months                        |</span>
<span id="cb48-83"><a href="#cb48-83" aria-hidden="true" tabindex="-1"></a>| Credit_History    | credit history meets guidelines               |</span>
<span id="cb48-84"><a href="#cb48-84" aria-hidden="true" tabindex="-1"></a>| Property_Area     | Urban/ Semi Urban/ Rural                      |</span>
<span id="cb48-85"><a href="#cb48-85" aria-hidden="true" tabindex="-1"></a>| Loan_Status       | Loan approved (Y/N)                           |</span>
<span id="cb48-86"><a href="#cb48-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-87"><a href="#cb48-87" aria-hidden="true" tabindex="-1"></a>There are four numeric variables represented by loan amount, loan amount term, applicant and co-applicant income. Several of these variables appear to be factors with specific levels but are not coded as such. For example, Gender, Married, Dependents, Education, Self_Employed, Property_Area, Credit_History, and Loan_Status are character strings. We will need to fix this if we are to make use of them.</span>
<span id="cb48-88"><a href="#cb48-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-89"><a href="#cb48-89" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data}</span></span>
<span id="cb48-90"><a href="#cb48-90" aria-hidden="true" tabindex="-1"></a><span class="co"># read data, change blank to NA and and remove loan_id</span></span>
<span id="cb48-91"><a href="#cb48-91" aria-hidden="true" tabindex="-1"></a>loan_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'https://raw.githubusercontent.com/amit-kapoor/Data622Group2/main/Loan_approval.csv'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-92"><a href="#cb48-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na_if</span>(<span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-93"><a href="#cb48-93" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb48-94"><a href="#cb48-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-95"><a href="#cb48-95" aria-hidden="true" tabindex="-1"></a><span class="co"># categorical columns as factors</span></span>
<span id="cb48-96"><a href="#cb48-96" aria-hidden="true" tabindex="-1"></a>loan_data <span class="ot">&lt;-</span> loan_data <span class="sc">%&gt;%</span> </span>
<span id="cb48-97"><a href="#cb48-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Gender=</span><span class="fu">as.factor</span>(Gender),</span>
<span id="cb48-98"><a href="#cb48-98" aria-hidden="true" tabindex="-1"></a>         <span class="at">Married=</span><span class="fu">as.factor</span>(Married),</span>
<span id="cb48-99"><a href="#cb48-99" aria-hidden="true" tabindex="-1"></a>         <span class="at">Dependents=</span><span class="fu">as.factor</span>(Dependents),</span>
<span id="cb48-100"><a href="#cb48-100" aria-hidden="true" tabindex="-1"></a>         <span class="at">Education=</span><span class="fu">as.factor</span>(Education),</span>
<span id="cb48-101"><a href="#cb48-101" aria-hidden="true" tabindex="-1"></a>         <span class="at">Self_Employed=</span><span class="fu">as.factor</span>(Self_Employed),</span>
<span id="cb48-102"><a href="#cb48-102" aria-hidden="true" tabindex="-1"></a>         <span class="at">Property_Area=</span><span class="fu">as.factor</span>(Property_Area),</span>
<span id="cb48-103"><a href="#cb48-103" aria-hidden="true" tabindex="-1"></a>         <span class="at">Credit_History=</span><span class="fu">as.factor</span>(Credit_History),</span>
<span id="cb48-104"><a href="#cb48-104" aria-hidden="true" tabindex="-1"></a>         <span class="at">Loan_Status=</span><span class="fu">as.factor</span>(Loan_Status))</span>
<span id="cb48-105"><a href="#cb48-105" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-106"><a href="#cb48-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-107"><a href="#cb48-107" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data summary</span></span>
<span id="cb48-108"><a href="#cb48-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-109"><a href="#cb48-109" aria-hidden="true" tabindex="-1"></a>Below is a summary of the loan approval dataset. For this process we have already adjusted the data types to their proper forms. This summarizing function quantifies each variable in a manner consistent with their types. We notice the levels of each factor in the 'Stats/Values' column, the frequency of valid (non-missing) observations per level of our factors, and the quantity and percent missing alongside them. We review these statistics to identify any issues with each variable.</span>
<span id="cb48-110"><a href="#cb48-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-111"><a href="#cb48-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r loan_data_summary}</span></span>
<span id="cb48-112"><a href="#cb48-112" aria-hidden="true" tabindex="-1"></a><span class="fu">dfSummary</span>(loan_data, <span class="at">style =</span> <span class="st">'grid'</span>, <span class="at">graph.col =</span> <span class="cn">FALSE</span>)</span>
<span id="cb48-113"><a href="#cb48-113" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-114"><a href="#cb48-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-115"><a href="#cb48-115" aria-hidden="true" tabindex="-1"></a>There are 7 columns that have missing values. The proportion of values for several columns shows significant differences and skew. For example, 97.9% of this dataset contains males applicants based on observations of the Gender variable, 99.5% of applicants are married people given the Married variable, and over 90% of our observations have longer Credit_History. Due to the disproportionate levels within the variables we should expect the data is not representative of a larger population unless that population happens to have similar proportions.</span>
<span id="cb48-116"><a href="#cb48-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-117"><a href="#cb48-117" aria-hidden="true" tabindex="-1"></a>Our numeric incomes variables show significant signs of skew through the differences in their mean and medians as well as their ranges. The lowest applicant income was 150, while the highest was 81000. A similar problem exists with our co-applicant income data having had individuals with 0 income on the lowest end of the range and 41667 on the highest.</span>
<span id="cb48-118"><a href="#cb48-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-119"><a href="#cb48-119" aria-hidden="true" tabindex="-1"></a>However, all of the observations contained an applicant and co-applicant income. Since some applicants may not have used a co-applicant on their applications, part of this skew could be caused by the data collection process. Additionally, we are only missing 3.6% of the observations of loan amount and 2.3% for loan terms.</span>
<span id="cb48-120"><a href="#cb48-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-121"><a href="#cb48-121" aria-hidden="true" tabindex="-1"></a>There are regular intervals and commonality in the loan term amounts which indicates we may have been able to factorize their data types. We chose instead to leave it as a discrete numeric value since it represents the term length which could be any number of days or months. We note that 85.3% percent of these applicants applied for a loan term of 360 but we are unsure if that is due to the lending institutions standard practice or if applicants requested this specific term.</span>
<span id="cb48-122"><a href="#cb48-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-123"><a href="#cb48-123" aria-hidden="true" tabindex="-1"></a>For exploratory purposes, we visualize the proportions to see just how skewed and disproportionate this dataset is. We include missing values to demonstrate their influence on the dataset as well. The chart below shows the distribution of all categorical variables, which includes the factors mentioned previously.</span>
<span id="cb48-124"><a href="#cb48-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-125"><a href="#cb48-125" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, cat-bar, fig.length =20, fig.width=10}</span></span>
<span id="cb48-126"><a href="#cb48-126" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb48-127"><a href="#cb48-127" aria-hidden="true" tabindex="-1"></a><span class="co"># select categorical columns</span></span>
<span id="cb48-128"><a href="#cb48-128" aria-hidden="true" tabindex="-1"></a>cat_cols <span class="ot">=</span> <span class="fu">c</span>()</span>
<span id="cb48-129"><a href="#cb48-129" aria-hidden="true" tabindex="-1"></a>j <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb48-130"><a href="#cb48-130" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(loan_data)) {</span>
<span id="cb48-131"><a href="#cb48-131" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">class</span>((loan_data[,i])) <span class="sc">==</span> <span class="st">'factor'</span>) {</span>
<span id="cb48-132"><a href="#cb48-132" aria-hidden="true" tabindex="-1"></a>      cat_cols[j]<span class="ot">=</span><span class="fu">names</span>(loan_data[i])</span>
<span id="cb48-133"><a href="#cb48-133" aria-hidden="true" tabindex="-1"></a>      j <span class="ot">&lt;-</span> j<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb48-134"><a href="#cb48-134" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb48-135"><a href="#cb48-135" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-136"><a href="#cb48-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-137"><a href="#cb48-137" aria-hidden="true" tabindex="-1"></a>loan_fact <span class="ot">&lt;-</span>  loan_data[cat_cols]</span>
<span id="cb48-138"><a href="#cb48-138" aria-hidden="true" tabindex="-1"></a><span class="co"># long format</span></span>
<span id="cb48-139"><a href="#cb48-139" aria-hidden="true" tabindex="-1"></a>loan_factm <span class="ot">&lt;-</span> <span class="fu">melt</span>(loan_fact, <span class="at">measure.vars =</span> cat_cols, <span class="at">variable.name =</span> <span class="st">'metric'</span>, <span class="at">value.name =</span> <span class="st">'value'</span>)</span>
<span id="cb48-140"><a href="#cb48-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-141"><a href="#cb48-141" aria-hidden="true" tabindex="-1"></a><span class="co"># plot categorical columns</span></span>
<span id="cb48-142"><a href="#cb48-142" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(loan_factm, <span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span> </span>
<span id="cb48-143"><a href="#cb48-143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span> </span>
<span id="cb48-144"><a href="#cb48-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span> </span>
<span id="cb48-145"><a href="#cb48-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> metric, <span class="at">nrow =</span> 5L, <span class="at">scales =</span> <span class="st">'free'</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>()</span>
<span id="cb48-146"><a href="#cb48-146" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-147"><a href="#cb48-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-148"><a href="#cb48-148" aria-hidden="true" tabindex="-1"></a>From this chart, it is very clear we have a dataset with mostly married male graduates with no dependents, a long credit history, and who are not self-employed. There is a relatively even mix of urban, suburban, and rural applicants and a small number of missing values. Applicants tend to be accepted more often than not and there are no missing observations for our target variable 'Loan_Status' nor the applicant's property area or education. These are all of our categorical variables.</span>
<span id="cb48-149"><a href="#cb48-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-150"><a href="#cb48-150" aria-hidden="true" tabindex="-1"></a>We also generate histograms with the count of each observation to assess our numeric variable distributions. This will let us know more about the skewness, average values, and where potential outliers may be found for our numeric variables. The graph below shows their distributions.</span>
<span id="cb48-151"><a href="#cb48-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-152"><a href="#cb48-152" aria-hidden="true" tabindex="-1"></a><span class="in">```{r plot_num}</span></span>
<span id="cb48-153"><a href="#cb48-153" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_histogram</span>(loan_data, <span class="at">geom_histogram_args =</span> <span class="fu">list</span>(<span class="st">"fill"</span> <span class="ot">=</span> <span class="st">"tomato4"</span>))</span>
<span id="cb48-154"><a href="#cb48-154" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-155"><a href="#cb48-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-156"><a href="#cb48-156" aria-hidden="true" tabindex="-1"></a>The applicant income and co-applicant income variables are highly right skewed with a smaller number of individual applicants stretching the distribution towards higher incomes. For analysis purposes, we must keep in mind that only a handful of applicants had higher incomes while the bulk of applicants were concentrated at the lower end of the income distribution. The loan amount term has one spike at 360. Meanwhile, the loan amount is the closest to normal. These results are consistent with our summary table.</span>
<span id="cb48-157"><a href="#cb48-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-158"><a href="#cb48-158" aria-hidden="true" tabindex="-1"></a>To review the impact of the categorical variables' proportions on loan approval in more detail, we isolate the factor levels individually. Here again, we visualize the proportions with and without missing values. Proportions are placed alongside each variable's frequency table. One example of this process, that of the amount of dependents for the individual, is shown.</span>
<span id="cb48-159"><a href="#cb48-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-160"><a href="#cb48-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-163"><a href="#cb48-163" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-164"><a href="#cb48-164" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb48-165"><a href="#cb48-165" aria-hidden="true" tabindex="-1"></a>fact_freq_table <span class="ot">&lt;-</span> loan_fact <span class="sc">%&gt;%</span></span>
<span id="cb48-166"><a href="#cb48-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb48-167"><a href="#cb48-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(key, value) <span class="sc">%&gt;%</span> </span>
<span id="cb48-168"><a href="#cb48-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>(), </span>
<span id="cb48-169"><a href="#cb48-169" aria-hidden="true" tabindex="-1"></a>            <span class="at">total =</span> <span class="fu">length</span>(loan_fact<span class="sc">$</span>Credit_History), </span>
<span id="cb48-170"><a href="#cb48-170" aria-hidden="true" tabindex="-1"></a>            <span class="at">percent =</span> <span class="fu">round</span>((freq<span class="sc">/</span>total)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>))</span>
<span id="cb48-171"><a href="#cb48-171" aria-hidden="true" tabindex="-1"></a>fact_freq_table<span class="sc">$</span>value[<span class="fu">which</span>(<span class="fu">is.na</span>(fact_freq_table<span class="sc">$</span>value))] <span class="ot">&lt;-</span> <span class="st">"Missing"</span></span>
<span id="cb48-172"><a href="#cb48-172" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-173"><a href="#cb48-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-174"><a href="#cb48-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-175"><a href="#cb48-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-178"><a href="#cb48-178" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-179"><a href="#cb48-179" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb48-180"><a href="#cb48-180" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false </span></span>
<span id="cb48-181"><a href="#cb48-181" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> fact_freq_table <span class="sc">%&gt;%</span> </span>
<span id="cb48-182"><a href="#cb48-182" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(key, <span class="st">"value"</span>, <span class="st">"freq"</span>, percent) <span class="sc">%&gt;%</span> </span>
<span id="cb48-183"><a href="#cb48-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">name =</span> value, <span class="at">value =</span> freq)</span>
<span id="cb48-184"><a href="#cb48-184" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb48-185"><a href="#cb48-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(key <span class="sc">==</span> <span class="st">"Dependents"</span>) </span>
<span id="cb48-186"><a href="#cb48-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-187"><a href="#cb48-187" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">"type"</span>, </span>
<span id="cb48-188"><a href="#cb48-188" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> <span class="fu">strong</span>(<span class="st">"Factor Selection"</span>),</span>
<span id="cb48-189"><a href="#cb48-189" aria-hidden="true" tabindex="-1"></a>            <span class="at">choices =</span> <span class="fu">unique</span>(df<span class="sc">$</span>key),</span>
<span id="cb48-190"><a href="#cb48-190" aria-hidden="true" tabindex="-1"></a>            <span class="at">selected =</span> <span class="st">"Dependents"</span>)</span>
<span id="cb48-191"><a href="#cb48-191" aria-hidden="true" tabindex="-1"></a><span class="fu">robservable</span>(</span>
<span id="cb48-192"><a href="#cb48-192" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://observablehq.com/@juba/draggable-pie-donut-chart"</span>,</span>
<span id="cb48-193"><a href="#cb48-193" aria-hidden="true" tabindex="-1"></a>  <span class="at">include =</span> <span class="fu">c</span>(<span class="st">"chart"</span>, <span class="st">"draw"</span>),</span>
<span id="cb48-194"><a href="#cb48-194" aria-hidden="true" tabindex="-1"></a>  <span class="at">hide =</span> <span class="st">"draw"</span>,</span>
<span id="cb48-195"><a href="#cb48-195" aria-hidden="true" tabindex="-1"></a>  <span class="at">input =</span> <span class="fu">list</span>(<span class="at">data =</span> df),</span>
<span id="cb48-196"><a href="#cb48-196" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">700</span></span>
<span id="cb48-197"><a href="#cb48-197" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-198"><a href="#cb48-198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-199"><a href="#cb48-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-200"><a href="#cb48-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-201"><a href="#cb48-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-202"><a href="#cb48-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-205"><a href="#cb48-205" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-206"><a href="#cb48-206" aria-hidden="true" tabindex="-1"></a>loan_dep <span class="ot">&lt;-</span> <span class="fu">with</span>(loan_data, <span class="fu">table</span>(Dependents, Loan_Status)) <span class="sc">%&gt;%</span> </span>
<span id="cb48-207"><a href="#cb48-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prop.table</span>(<span class="at">margin =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Loan_Status <span class="sc">==</span> <span class="st">'Y'</span>)</span>
<span id="cb48-208"><a href="#cb48-208" aria-hidden="true" tabindex="-1"></a>loan_dep</span>
<span id="cb48-209"><a href="#cb48-209" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-210"><a href="#cb48-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-213"><a href="#cb48-213" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-214"><a href="#cb48-214" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false </span></span>
<span id="cb48-215"><a href="#cb48-215" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(loan_dep, <span class="fu">aes</span>(<span class="at">x=</span>Dependents, <span class="at">y=</span>Freq, <span class="at">fill=</span>Dependents)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">'identity'</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Approved Loans by Dependents'</span>, <span class="at">y =</span> <span class="st">"Percentage"</span>, <span class="at">x =</span> <span class="st">"Dependents"</span>)</span>
<span id="cb48-216"><a href="#cb48-216" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-217"><a href="#cb48-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-218"><a href="#cb48-218" aria-hidden="true" tabindex="-1"></a>Although we only show one example, the remaining examples confirm our thoughts about the dataset's disproportionalities. Missing values have little effect on the overall proportions and so they can simply be removed or omitted. It remains male dominated with applicants who are married, have no dependents, are highly educated, and have a long credit history.</span>
<span id="cb48-219"><a href="#cb48-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-220"><a href="#cb48-220" aria-hidden="true" tabindex="-1"></a><span class="fu">## Correlations</span></span>
<span id="cb48-221"><a href="#cb48-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-222"><a href="#cb48-222" aria-hidden="true" tabindex="-1"></a>To determine how well each variable is correlated with our target variable and with one another, we construct a correlation plot. This plot contains the values of all correlation between variables represented by colors and numbers. The row we review the most is our target variable, 'Loan_Status.'</span>
<span id="cb48-223"><a href="#cb48-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-226"><a href="#cb48-226" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-227"><a href="#cb48-227" aria-hidden="true" tabindex="-1"></a>G <span class="ot">=</span> <span class="fu">cor</span>(loan_data[<span class="dv">6</span><span class="sc">:</span>(<span class="fu">length</span>(loan_data)<span class="sc">-</span><span class="dv">3</span>)])</span>
<span id="cb48-228"><a href="#cb48-228" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(G, <span class="at">method =</span> <span class="st">'number'</span>) <span class="co"># colorful number</span></span>
<span id="cb48-229"><a href="#cb48-229" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-230"><a href="#cb48-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-231"><a href="#cb48-231" aria-hidden="true" tabindex="-1"></a>The numeric features do not seem to be strongly correlated with another so that is a factor that does not have to be dealt with.</span>
<span id="cb48-232"><a href="#cb48-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-235"><a href="#cb48-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-236"><a href="#cb48-236" aria-hidden="true" tabindex="-1"></a>G <span class="ot">=</span> <span class="fu">cor</span>(loan_data[<span class="dv">6</span><span class="sc">:</span>(<span class="fu">length</span>(loan_data)<span class="sc">-</span><span class="dv">3</span>)])</span>
<span id="cb48-237"><a href="#cb48-237" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(G, <span class="at">method =</span> <span class="st">'number'</span>) <span class="co"># colorful number</span></span>
<span id="cb48-238"><a href="#cb48-238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-239"><a href="#cb48-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-240"><a href="#cb48-240" aria-hidden="true" tabindex="-1"></a>Given that our numeric features have correlation values near 0, they do not seem to be strongly correlated with our target. They also do not seem to have any correlation with one another so this is a factor that does not have to be dealt with.</span>
<span id="cb48-241"><a href="#cb48-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-242"><a href="#cb48-242" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Preparation</span></span>
<span id="cb48-243"><a href="#cb48-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-244"><a href="#cb48-244" aria-hidden="true" tabindex="-1"></a><span class="fu">## Handling missing values</span></span>
<span id="cb48-245"><a href="#cb48-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-248"><a href="#cb48-248" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-249"><a href="#cb48-249" aria-hidden="true" tabindex="-1"></a><span class="co"># plot missing values</span></span>
<span id="cb48-250"><a href="#cb48-250" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(loan_data)</span>
<span id="cb48-251"><a href="#cb48-251" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-252"><a href="#cb48-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-253"><a href="#cb48-253" aria-hidden="true" tabindex="-1"></a>We can see above credit_history contributes to 8% of missing data along with self_employed that accounts for more than 5% of missing data. All records having missing categorical predictors will be removed. Next we will impute numeric values using MICE (Multivariate Imputation by Chained Equations).</span>
<span id="cb48-254"><a href="#cb48-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-255"><a href="#cb48-255" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cat-missing}</span></span>
<span id="cb48-256"><a href="#cb48-256" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out the data which has missing categorical predictors</span></span>
<span id="cb48-257"><a href="#cb48-257" aria-hidden="true" tabindex="-1"></a>loan_data <span class="ot">&lt;-</span> loan_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Credit_History) <span class="sc">&amp;</span></span>
<span id="cb48-258"><a href="#cb48-258" aria-hidden="true" tabindex="-1"></a>                                  <span class="sc">!</span><span class="fu">is.na</span>(Self_Employed) <span class="sc">&amp;</span>  </span>
<span id="cb48-259"><a href="#cb48-259" aria-hidden="true" tabindex="-1"></a>                                  <span class="sc">!</span><span class="fu">is.na</span>(Dependents) <span class="sc">&amp;</span> </span>
<span id="cb48-260"><a href="#cb48-260" aria-hidden="true" tabindex="-1"></a>                                  <span class="sc">!</span><span class="fu">is.na</span>(Gender) <span class="sc">&amp;</span> </span>
<span id="cb48-261"><a href="#cb48-261" aria-hidden="true" tabindex="-1"></a>                                  <span class="sc">!</span><span class="fu">is.na</span>(Married))</span>
<span id="cb48-262"><a href="#cb48-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-263"><a href="#cb48-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-264"><a href="#cb48-264" aria-hidden="true" tabindex="-1"></a><span class="in">```{r num-missing}</span></span>
<span id="cb48-265"><a href="#cb48-265" aria-hidden="true" tabindex="-1"></a><span class="co"># impute numeric predictors using mice</span></span>
<span id="cb48-266"><a href="#cb48-266" aria-hidden="true" tabindex="-1"></a>loan_data <span class="ot">&lt;-</span> <span class="fu">complete</span>(<span class="fu">mice</span>(<span class="at">data=</span>loan_data, <span class="at">method=</span><span class="st">"pmm"</span>, <span class="at">print=</span><span class="cn">FALSE</span>))</span>
<span id="cb48-267"><a href="#cb48-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-268"><a href="#cb48-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-271"><a href="#cb48-271" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-272"><a href="#cb48-272" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(loan_data)</span>
<span id="cb48-273"><a href="#cb48-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-274"><a href="#cb48-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-275"><a href="#cb48-275" aria-hidden="true" tabindex="-1"></a>Finally our clean dataset contains 511 rows and 12 columns.</span>
<span id="cb48-276"><a href="#cb48-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-277"><a href="#cb48-277" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preprocess using transformation</span></span>
<span id="cb48-278"><a href="#cb48-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-279"><a href="#cb48-279" aria-hidden="true" tabindex="-1"></a>We have seen above that numeric features are right skewed so in this step we will use caret <span class="in">`preprocess`</span> method using box cox, center and scale transformation.</span>
<span id="cb48-280"><a href="#cb48-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-281"><a href="#cb48-281" aria-hidden="true" tabindex="-1"></a><span class="in">```{r transform-train}</span></span>
<span id="cb48-282"><a href="#cb48-282" aria-hidden="true" tabindex="-1"></a><span class="co"># library(e1071) - where this was used</span></span>
<span id="cb48-283"><a href="#cb48-283" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">622</span>)</span>
<span id="cb48-284"><a href="#cb48-284" aria-hidden="true" tabindex="-1"></a>loan_data <span class="ot">&lt;-</span> loan_data <span class="sc">%&gt;%</span> </span>
<span id="cb48-285"><a href="#cb48-285" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"ApplicantIncome"</span>, <span class="st">"CoapplicantIncome"</span>, <span class="st">"LoanAmount"</span>, <span class="st">"Loan_Amount_Term"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-286"><a href="#cb48-286" aria-hidden="true" tabindex="-1"></a>  <span class="fu">preProcess</span>(<span class="at">method =</span> <span class="fu">c</span>(<span class="st">"BoxCox"</span>,<span class="st">"center"</span>,<span class="st">"scale"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb48-287"><a href="#cb48-287" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(loan_data)</span>
<span id="cb48-288"><a href="#cb48-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-289"><a href="#cb48-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-290"><a href="#cb48-290" aria-hidden="true" tabindex="-1"></a><span class="fu">## Training and Test Partition</span></span>
<span id="cb48-291"><a href="#cb48-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-292"><a href="#cb48-292" aria-hidden="true" tabindex="-1"></a>In this step for data preparation we will partition the training dataset in training and validation sets using <span class="in">`createDataPartition`</span> method from <span class="in">`caret`</span> package. We will reserve 75% for training and rest 25% for validation purpose.</span>
<span id="cb48-293"><a href="#cb48-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-294"><a href="#cb48-294" aria-hidden="true" tabindex="-1"></a><span class="in">```{r partition}</span></span>
<span id="cb48-295"><a href="#cb48-295" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">622</span>)</span>
<span id="cb48-296"><a href="#cb48-296" aria-hidden="true" tabindex="-1"></a>partition <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(loan_data<span class="sc">$</span>Loan_Status, <span class="at">p=</span><span class="fl">0.75</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb48-297"><a href="#cb48-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-298"><a href="#cb48-298" aria-hidden="true" tabindex="-1"></a>training <span class="ot">&lt;-</span> loan_data[partition,]</span>
<span id="cb48-299"><a href="#cb48-299" aria-hidden="true" tabindex="-1"></a>testing <span class="ot">&lt;-</span> loan_data[<span class="sc">-</span>partition,]</span>
<span id="cb48-300"><a href="#cb48-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-301"><a href="#cb48-301" aria-hidden="true" tabindex="-1"></a><span class="co"># training/validation partition for independent variables</span></span>
<span id="cb48-302"><a href="#cb48-302" aria-hidden="true" tabindex="-1"></a><span class="co">#X.train &lt;- ld.clean[partition, ] %&gt;% dplyr::select(-Loan_Status)</span></span>
<span id="cb48-303"><a href="#cb48-303" aria-hidden="true" tabindex="-1"></a><span class="co">#X.test &lt;- ld.clean[-partition, ] %&gt;% dplyr::select(-Loan_Status)</span></span>
<span id="cb48-304"><a href="#cb48-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-305"><a href="#cb48-305" aria-hidden="true" tabindex="-1"></a><span class="co"># training/validation partition for dependent variable Loan_Status</span></span>
<span id="cb48-306"><a href="#cb48-306" aria-hidden="true" tabindex="-1"></a><span class="co">#y.train &lt;- ld.clean$Loan_Status[partition]</span></span>
<span id="cb48-307"><a href="#cb48-307" aria-hidden="true" tabindex="-1"></a><span class="co">#y.test &lt;- ld.clean$Loan_Status[-partition]</span></span>
<span id="cb48-308"><a href="#cb48-308" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-309"><a href="#cb48-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-310"><a href="#cb48-310" aria-hidden="true" tabindex="-1"></a><span class="fu"># Build Models</span></span>
<span id="cb48-311"><a href="#cb48-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-312"><a href="#cb48-312" aria-hidden="true" tabindex="-1"></a><span class="fu">## Linear Discriminant Analysis (LDA)</span></span>
<span id="cb48-313"><a href="#cb48-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-314"><a href="#cb48-314" aria-hidden="true" tabindex="-1"></a><span class="in">```{r lda}</span></span>
<span id="cb48-315"><a href="#cb48-315" aria-hidden="true" tabindex="-1"></a><span class="co"># LDA model</span></span>
<span id="cb48-316"><a href="#cb48-316" aria-hidden="true" tabindex="-1"></a>lda_model <span class="ot">&lt;-</span> <span class="fu">lda</span>(Loan_Status<span class="sc">~</span>., <span class="at">data =</span> loan_data)</span>
<span id="cb48-317"><a href="#cb48-317" aria-hidden="true" tabindex="-1"></a>lda_model</span>
<span id="cb48-318"><a href="#cb48-318" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-319"><a href="#cb48-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-322"><a href="#cb48-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-323"><a href="#cb48-323" aria-hidden="true" tabindex="-1"></a><span class="co"># prediction from lda model</span></span>
<span id="cb48-324"><a href="#cb48-324" aria-hidden="true" tabindex="-1"></a>lda_predict <span class="ot">&lt;-</span> lda_model <span class="sc">%&gt;%</span> </span>
<span id="cb48-325"><a href="#cb48-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(testing)</span>
<span id="cb48-326"><a href="#cb48-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-327"><a href="#cb48-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-328"><a href="#cb48-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{r lda-accuracy}</span></span>
<span id="cb48-329"><a href="#cb48-329" aria-hidden="true" tabindex="-1"></a><span class="co"># accuracy</span></span>
<span id="cb48-330"><a href="#cb48-330" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(lda_predict<span class="sc">$</span>class<span class="sc">==</span>testing<span class="sc">$</span>Loan_Status)</span>
<span id="cb48-331"><a href="#cb48-331" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(lda_predict<span class="sc">$</span>class, testing<span class="sc">$</span>Loan_Status)</span>
<span id="cb48-332"><a href="#cb48-332" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-333"><a href="#cb48-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-334"><a href="#cb48-334" aria-hidden="true" tabindex="-1"></a>LDA model accuracy comes out as \~81%</span>
<span id="cb48-335"><a href="#cb48-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-336"><a href="#cb48-336" aria-hidden="true" tabindex="-1"></a><span class="fu">## K-nearest neighbor (KNN)</span></span>
<span id="cb48-337"><a href="#cb48-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-338"><a href="#cb48-338" aria-hidden="true" tabindex="-1"></a><span class="in">```{r knn}</span></span>
<span id="cb48-339"><a href="#cb48-339" aria-hidden="true" tabindex="-1"></a><span class="co"># KNN model</span></span>
<span id="cb48-340"><a href="#cb48-340" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">622</span>)</span>
<span id="cb48-341"><a href="#cb48-341" aria-hidden="true" tabindex="-1"></a>train.knn <span class="ot">&lt;-</span> training[, <span class="fu">names</span>(training) <span class="sc">!=</span> <span class="st">"Direction"</span>]</span>
<span id="cb48-342"><a href="#cb48-342" aria-hidden="true" tabindex="-1"></a>prep <span class="ot">&lt;-</span> <span class="fu">preProcess</span>(<span class="at">x =</span> train.knn, <span class="at">method =</span> <span class="fu">c</span>(<span class="st">"center"</span>, <span class="st">"scale"</span>))</span>
<span id="cb48-343"><a href="#cb48-343" aria-hidden="true" tabindex="-1"></a>prep</span>
<span id="cb48-344"><a href="#cb48-344" aria-hidden="true" tabindex="-1"></a>cl <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method=</span><span class="st">"repeatedcv"</span>, <span class="at">repeats =</span> <span class="dv">5</span>) </span>
<span id="cb48-345"><a href="#cb48-345" aria-hidden="true" tabindex="-1"></a>knn_model <span class="ot">&lt;-</span> <span class="fu">train</span>(Loan_Status <span class="sc">~</span> ., <span class="at">data =</span> training, </span>
<span id="cb48-346"><a href="#cb48-346" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"knn"</span>, </span>
<span id="cb48-347"><a href="#cb48-347" aria-hidden="true" tabindex="-1"></a>                <span class="at">trControl =</span> cl, </span>
<span id="cb48-348"><a href="#cb48-348" aria-hidden="true" tabindex="-1"></a>                <span class="at">preProcess =</span> <span class="fu">c</span>(<span class="st">"center"</span>,<span class="st">"scale"</span>), </span>
<span id="cb48-349"><a href="#cb48-349" aria-hidden="true" tabindex="-1"></a>                <span class="at">tuneLength =</span> <span class="dv">20</span>)</span>
<span id="cb48-350"><a href="#cb48-350" aria-hidden="true" tabindex="-1"></a>knn_model </span>
<span id="cb48-351"><a href="#cb48-351" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-352"><a href="#cb48-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-355"><a href="#cb48-355" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-356"><a href="#cb48-356" aria-hidden="true" tabindex="-1"></a><span class="co"># prediction from knn model</span></span>
<span id="cb48-357"><a href="#cb48-357" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(knn_model)</span>
<span id="cb48-358"><a href="#cb48-358" aria-hidden="true" tabindex="-1"></a>knn_predict <span class="ot">&lt;-</span> <span class="fu">predict</span>(knn_model,<span class="at">newdata =</span> testing)</span>
<span id="cb48-359"><a href="#cb48-359" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(knn_predict <span class="sc">==</span> testing<span class="sc">$</span>Loan_Status) <span class="co"># accuracy</span></span>
<span id="cb48-360"><a href="#cb48-360" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(knn_predict, testing<span class="sc">$</span>Loan_Status)</span>
<span id="cb48-361"><a href="#cb48-361" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-362"><a href="#cb48-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-363"><a href="#cb48-363" aria-hidden="true" tabindex="-1"></a>KNN model accuracy comes out as \~80%</span>
<span id="cb48-364"><a href="#cb48-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-365"><a href="#cb48-365" aria-hidden="true" tabindex="-1"></a><span class="fu">## Decision Trees</span></span>
<span id="cb48-366"><a href="#cb48-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-367"><a href="#cb48-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Decision}</span></span>
<span id="cb48-368"><a href="#cb48-368" aria-hidden="true" tabindex="-1"></a><span class="co"># Decision Trees model</span></span>
<span id="cb48-369"><a href="#cb48-369" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">622</span>)</span>
<span id="cb48-370"><a href="#cb48-370" aria-hidden="true" tabindex="-1"></a>tree.loans <span class="ot">=</span> <span class="fu">tree</span>(Loan_Status<span class="sc">~</span>., <span class="at">data=</span>training)</span>
<span id="cb48-371"><a href="#cb48-371" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tree.loans)</span>
<span id="cb48-372"><a href="#cb48-372" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tree.loans)</span>
<span id="cb48-373"><a href="#cb48-373" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(tree.loans, <span class="at">pretty =</span> <span class="dv">0</span>)</span>
<span id="cb48-374"><a href="#cb48-374" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-375"><a href="#cb48-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-378"><a href="#cb48-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-379"><a href="#cb48-379" aria-hidden="true" tabindex="-1"></a><span class="co"># prediction from decision tree model</span></span>
<span id="cb48-380"><a href="#cb48-380" aria-hidden="true" tabindex="-1"></a>tree.predict<span class="ot">&lt;-</span><span class="fu">predict</span>(tree.loans, testing, <span class="at">type =</span> <span class="st">'class'</span>)</span>
<span id="cb48-381"><a href="#cb48-381" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(tree.predict <span class="sc">==</span> testing<span class="sc">$</span>Loan_Status) <span class="co"># accuracy</span></span>
<span id="cb48-382"><a href="#cb48-382" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(tree.predict, testing<span class="sc">$</span>Loan_Status)</span>
<span id="cb48-383"><a href="#cb48-383" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-384"><a href="#cb48-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-385"><a href="#cb48-385" aria-hidden="true" tabindex="-1"></a>Decision Tree model accuracy comes out as \~80%</span>
<span id="cb48-386"><a href="#cb48-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-387"><a href="#cb48-387" aria-hidden="true" tabindex="-1"></a><span class="fu">## Random Forests</span></span>
<span id="cb48-388"><a href="#cb48-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-389"><a href="#cb48-389" aria-hidden="true" tabindex="-1"></a><span class="in">```{r rf}</span></span>
<span id="cb48-390"><a href="#cb48-390" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">622</span>)</span>
<span id="cb48-391"><a href="#cb48-391" aria-hidden="true" tabindex="-1"></a><span class="co"># Random Forest model</span></span>
<span id="cb48-392"><a href="#cb48-392" aria-hidden="true" tabindex="-1"></a>rf.loans <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(Loan_Status<span class="sc">~</span>., <span class="at">data =</span> training)</span>
<span id="cb48-393"><a href="#cb48-393" aria-hidden="true" tabindex="-1"></a>rf.loans</span>
<span id="cb48-394"><a href="#cb48-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-395"><a href="#cb48-395" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-396"><a href="#cb48-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-399"><a href="#cb48-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-400"><a href="#cb48-400" aria-hidden="true" tabindex="-1"></a><span class="co"># prediction from random forest model</span></span>
<span id="cb48-401"><a href="#cb48-401" aria-hidden="true" tabindex="-1"></a>rf.predict <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf.loans, testing,<span class="at">type=</span><span class="st">'class'</span>)</span>
<span id="cb48-402"><a href="#cb48-402" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(rf.predict <span class="sc">==</span> testing<span class="sc">$</span>Loan_Status) <span class="co"># accuracy</span></span>
<span id="cb48-403"><a href="#cb48-403" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(rf.predict, testing<span class="sc">$</span>Loan_Status)</span>
<span id="cb48-404"><a href="#cb48-404" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-405"><a href="#cb48-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-406"><a href="#cb48-406" aria-hidden="true" tabindex="-1"></a>Random Forest model accuracy comes out as \~80%</span>
<span id="cb48-407"><a href="#cb48-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-408"><a href="#cb48-408" aria-hidden="true" tabindex="-1"></a><span class="fu"># Model Performance</span></span>
<span id="cb48-409"><a href="#cb48-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-410"><a href="#cb48-410" aria-hidden="true" tabindex="-1"></a>All 4 of the models we built above have an accuracy rate of around 80% with the Random Forest and LDA model getting the light edge in accuracy (81.1% to 79.5%)</span>
<span id="cb48-411"><a href="#cb48-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-412"><a href="#cb48-412" aria-hidden="true" tabindex="-1"></a>We will look at some more detailed accuracy metrics produced from the predict function.</span>
<span id="cb48-413"><a href="#cb48-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-416"><a href="#cb48-416" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb48-417"><a href="#cb48-417" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: model-performance</span></span>
<span id="cb48-418"><a href="#cb48-418" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Model Performance"</span></span>
<span id="cb48-419"><a href="#cb48-419" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb48-420"><a href="#cb48-420" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb48-421"><a href="#cb48-421" aria-hidden="true" tabindex="-1"></a>model_performance_table <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(</span>
<span id="cb48-422"><a href="#cb48-422" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Linear Discriminant Analysis (LDA)"</span>, </span>
<span id="cb48-423"><a href="#cb48-423" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.732</span>, <span class="fl">0.875</span>, (<span class="fl">0.875-0.732</span>), </span>
<span id="cb48-424"><a href="#cb48-424" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.811</span>, <span class="fl">0.720</span>, <span class="fl">0.463</span>, <span class="fl">0.977</span>,</span>
<span id="cb48-425"><a href="#cb48-425" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.505</span>, <span class="fl">0.905</span>, <span class="fl">0.001</span>,</span>
<span id="cb48-426"><a href="#cb48-426" aria-hidden="true" tabindex="-1"></a>         <span class="st">"K-Nearest Neighbor (KNN)"</span>, </span>
<span id="cb48-427"><a href="#cb48-427" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.715</span>, <span class="fl">0.862</span>, (<span class="fl">0.862-0.715</span>),</span>
<span id="cb48-428"><a href="#cb48-428" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.795</span>, <span class="fl">0.696</span>, <span class="fl">0.415</span>, <span class="fl">0.977</span>,</span>
<span id="cb48-429"><a href="#cb48-429" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.455</span>, <span class="fl">0.895</span>, <span class="fl">0.002</span>,</span>
<span id="cb48-430"><a href="#cb48-430" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Decision Trees (DTs)"</span>, </span>
<span id="cb48-431"><a href="#cb48-431" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.715</span>, <span class="fl">0.862</span>, (<span class="fl">0.862-0.715</span>),</span>
<span id="cb48-432"><a href="#cb48-432" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.795</span>, <span class="fl">0.709</span>, <span class="fl">0.463</span>, <span class="fl">0.954</span>,</span>
<span id="cb48-433"><a href="#cb48-433" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.471</span>, <span class="fl">0.826</span>, <span class="fl">0.001</span>, </span>
<span id="cb48-434"><a href="#cb48-434" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Random Forests (RFs)"</span>, </span>
<span id="cb48-435"><a href="#cb48-435" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.732</span>, <span class="fl">0.875</span>, (<span class="fl">0.875-0.732</span>),</span>
<span id="cb48-436"><a href="#cb48-436" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.811</span>, <span class="fl">0.739</span>, <span class="fl">0.537</span>, <span class="fl">0.942</span>,</span>
<span id="cb48-437"><a href="#cb48-437" aria-hidden="true" tabindex="-1"></a>         <span class="fl">0.525</span>, <span class="fl">0.815</span>, <span class="fl">0.001</span>),</span>
<span id="cb48-438"><a href="#cb48-438" aria-hidden="true" tabindex="-1"></a>         <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">byrow =</span> T))</span>
<span id="cb48-439"><a href="#cb48-439" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(model_performance_table) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ID"</span>, </span>
<span id="cb48-440"><a href="#cb48-440" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Lower"</span>, </span>
<span id="cb48-441"><a href="#cb48-441" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Upper"</span>, </span>
<span id="cb48-442"><a href="#cb48-442" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Range &amp; Variation"</span>,</span>
<span id="cb48-443"><a href="#cb48-443" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Accuracy"</span>,</span>
<span id="cb48-444"><a href="#cb48-444" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Sensitivity"</span>, </span>
<span id="cb48-445"><a href="#cb48-445" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Specificity"</span>,</span>
<span id="cb48-446"><a href="#cb48-446" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Balanced Accuracy"</span>,</span>
<span id="cb48-447"><a href="#cb48-447" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Kappa"</span>, </span>
<span id="cb48-448"><a href="#cb48-448" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"True Positives"</span>, </span>
<span id="cb48-449"><a href="#cb48-449" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"P-value"</span>)</span>
<span id="cb48-450"><a href="#cb48-450" aria-hidden="true" tabindex="-1"></a>model_performance_table</span>
<span id="cb48-451"><a href="#cb48-451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb48-452"><a href="#cb48-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-453"><a href="#cb48-453" aria-hidden="true" tabindex="-1"></a>In this particular case, since the accuracy results are so similar it is wise to examine which models are most often leading to type 1 or type 2 errors. Assuming a null hypothesis is not giving a loan, a type 1 error is giving someone a loan when they should not have gotten one and a type 2 error is not giving someone a loan when they should have gotten one. This correlates to the sensitivity and specificity respectively.</span>
<span id="cb48-454"><a href="#cb48-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-455"><a href="#cb48-455" aria-hidden="true" tabindex="-1"></a>The balanced accuracy metric takes the mean of sensitivity and specificity in order to diagnose if a model appears to be accurate but is really only predicting the positive or negative case correctly. In this case the random forest model has a slight edge over the LDA in balanced accuracy (0.739 to 0.7201). This metric should be considered most impactful in our decision-making process since it directly contributes to the type of risk that will have to be managed in a portfolio.</span>
<span id="cb48-456"><a href="#cb48-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-457"><a href="#cb48-457" aria-hidden="true" tabindex="-1"></a>Although the LDA has the smallest p-value it is still <span class="sc">\&lt;</span>0.0025 for all models. They can all be used so this does not help us decide which model to choose. The same can be said for the Mcnemar's p-value.</span>
<span id="cb48-458"><a href="#cb48-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-459"><a href="#cb48-459" aria-hidden="true" tabindex="-1"></a>The random forest also has the best Kappa score of 0.525. The Kappa score can be a much more accurate indicator of accuracy then the standard accuracy rate. The kappa score takes into account the expected accuracy of a model given the instances of each class. This helps a lot with unbalanced class numbers in the dataset. It is encouraging to see that our random forest model's Kappa is also the highest because this corresponds with it having the highest expected accuracy of our models in production.</span>
<span id="cb48-460"><a href="#cb48-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-461"><a href="#cb48-461" aria-hidden="true" tabindex="-1"></a>Given that our random forest and LDA models have nearly equal accuracy, the same low-amount of variations present in their predictions, and reasonable kappa scores, either could be used with similar results. However, it is also important to consider context. The priority for business is to ensure loans are paid and lower the risk of loss or credit damage. For this reason, it may be beneficial to focus on the type 1 error rate, if we do not care how many people do not get loans when they should have. Otherwise, the more holistic metric of balanced accuracy ensures that more people get approved for loans when needed. </span>
<span id="cb48-462"><a href="#cb48-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-463"><a href="#cb48-463" aria-hidden="true" tabindex="-1"></a>It is also important to consider our data assets. The LDA model requires fewer inputs to produce an output with nearly identical accuracy as the random forest model. If we were in a highly competitive market for data assets then a reduction in input for equally accurate predictive results could be more important than any performance score. Therefore, in resource competitive environments, the LDA would be the preferred model method since it can produce the highest balanced accuracy. </span>
<span id="cb48-464"><a href="#cb48-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-465"><a href="#cb48-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-466"><a href="#cb48-466" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusion</span></span>
<span id="cb48-467"><a href="#cb48-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-468"><a href="#cb48-468" aria-hidden="true" tabindex="-1"></a>After reviewing the results of 4 different models (LDA, KNN, Decision Tree, and Random Forest), we found that LDA is the most accurate by balanced accuracy and should be considered the best model in competitive resource limited environments. However, the performance metrics for these 4 models were very close. Depending on the stakeholders, it may be wise to recommend the random forest model with the caveat that greater resources would need to be devoted to it to produce slightly higher sensitivity scores. </span>
<span id="cb48-469"><a href="#cb48-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-470"><a href="#cb48-470" aria-hidden="true" tabindex="-1"></a>When attempting to minimize risk as much as possible and avoid purchasing data assets, the LDA model provides the best insights. If the lender is willing to provide more loans at a greater level of risk, then, based on this data set, the random forest would be better suited for this task.</span>
<span id="cb48-471"><a href="#cb48-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-472"><a href="#cb48-472" aria-hidden="true" tabindex="-1"></a>To improve upon these metrics and gain better predictive power we should consider feature engineering and exploring new model types. Some models may be able to produce the same results with fewer features and if data collection resources are of concern, such a model would be essential to avoid paying for new features or data sets. There may also be undiscovered relationships between variables that can be used to better estimate likelihood of repayment and provide new insights.</span>
<span id="cb48-473"><a href="#cb48-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-474"><a href="#cb48-474" aria-hidden="true" tabindex="-1"></a>To see the full report and source code, <span class="co">[</span><span class="ot">visit my Github site</span><span class="co">](https://github.com/palmorezm/showcase/tree/master/posts/Loan%20Assessment)</span>.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>